var app = angular.module('app', ['ui.grid', 'ui.grid.cellNav', 'ui.grid.edit', 'ui.grid.resizeColumns', 'ui.grid.pinning']);

app.controller('MainCtrl',  ['$scope', '$http', '$timeout', '$interval', function ($scope, $http, $timeout, $interval) {

    $scope.gridOptions = { rowHeight: 60,
        onRegisterApi: function (gridApi) {
            $scope.gridApi = gridApi;
            var cellTemplate = 'ui-grid/selectionRowHeader';   // you could use your own template here
            $scope.gridApi.core.addRowHeaderColumn({
                    name: 'rowHeaderCol',
                    displayName: '', width: 80,
                    cellTemplate: "<div class=\"ui-grid-row-header-cell ui-grid-disable-selection\"><div class=\"ui-grid-cell-contents\">{{row.entity['rowHeader']}}</div></div>"
                }
            );
        }
    };
    $scope.gridOptions.data = 'myData';
    $scope.gridOptions.enableColumnResizing = true;

    $scope.gridOptions.rowIdentity = function (row) {
        return row.id;
    };
    $scope.gridOptions.getRowIdentity = function (row) {
        return row.id;
    };

    $scope.gridOptions.columnDefs = [
        {name: 'Day1', displayName: "Day 1", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day2', displayName: "Day 2", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day3', displayName: "Day 3", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day4', displayName: "Day 4", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day5', displayName: "Day 5", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day6', displayName: "Day 6", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day7', displayName: "Day 7", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day8', displayName: "Day 8", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day9', displayName: "Day 9", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},
        {name: 'Day10', displayName: "Day 10", width: 200, cellTemplate:'<div ng-repeat="item in row.entity[col.field]">{{item}}</div>'},


        // {
        //     name: 'gender', width: 200, enableCellEdit: true,
        //     cellTemplate: '<div class="ui-grid-cell-contents"><span>Age:{{COL_FIELD}}</span></div>'
        // },
        // {
        //     name: 'company', width: 200, enableCellEdit: true,
        //     cellTemplate: '<div class="ui-grid-cell-contents"><span>Street:{{COL_FIELD}}</span></div>'
        // },
    ];

    //$scope.gridOptions = { rowHeight:60}

    $scope.refreshData = function () {
        $http.get('/static/json/100.json').success(function (data) {
            $scope.myData = data;
            $scope.gridOptions.data = $scope.myData;
        });
    };
}])
